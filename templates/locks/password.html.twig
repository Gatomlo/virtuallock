{% extends 'base.html.twig' %}

{% block title %}{{lock.name}}{% endblock %}

{% block body %}

<div id="body">
  <div class="container">
    <div id="intro">{{lock.intro}}</div>
    <div id="loginBox" class="d-flex flex-column justify-content-center align-items-center" >
      <form id="form">
        <div class="input-group">
          <input type="text" id="password" class="form-control"   aria-describedby="button-addon4">
          <div class="input-group-append" id="button-addon4">
            <button id="send" class="btn btn-outline-secondary btn-primary" type="button">
              <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-key-fill" fill="white" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
              </svg>
            </button>
          </div>
        </div>
      </form>
    </div>
    <div id="soluceZone"></div>
  </div>
</div>
{% endblock %}
{% block javascripts %}
  <script>
    $('#send').click(function(){
      var password = $("#password").val();
      if (password === '{{lock.solution}}';){
        if ('{{lock.url}}' == ''){
          $('#soluceZone').html('{{lock.finalTexte}}');
        }
        else{
          window.location.href = '{{lock.url}}';
        }
      }
      else{
        $('#loginBox').append('<div id="message" class="alert alert-danger alert-dismissible fade show" role="alert">'+
        '<strong>Erreur!</strong> Mot de passe incorrect.'+
        '<button type="button" class="close" data-dismiss="alert" aria-label="Close">'+
          '<span aria-hidden="true">&times;</span></button></div>')
      }
    })
  </script>

{% endblock %}
